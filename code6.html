<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game</title>
<style>
  body {
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  canvas {
    border: 1px solid #333;
  }
</style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="400"></canvas>
<div id="score">Score: 0</div>

<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  // Snake properties
  const snakeSize = 10;
  let snake = [{ x: 10, y: 10 }];
  let food = { x: 0, y: 0 };
  let dx = 10;
  let dy = 0;
  let score = 0;

  // Keyboard controls
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowUp':
        if (dy !== snakeSize) {
          dx = 0;
          dy = -snakeSize;
        }
        break;
      case 'ArrowDown':
        if (dy !== -snakeSize) {
          dx = 0;
          dy = snakeSize;
        }
        break;
      case 'ArrowLeft':
        if (dx !== snakeSize) {
          dx = -snakeSize;
          dy = 0;
        }
        break;
      case 'ArrowRight':
        if (dx !== -snakeSize) {
          dx = snakeSize;
          dy = 0;
        }
        break;
    }
  });

  // Game loop
  function gameLoop() {
    moveSnake();
    checkCollision();
    if (checkFood()) {
      eatFood();
      generateFood();
    }
    draw();
    setTimeout(gameLoop, 100);
  }

  // Initialize game
  function initGame() {
    generateFood();
    gameLoop();
  }

  // Move snake based on direction
  function moveSnake() {
    const head = { x: snake[0].x + dx, y: snake[0].y + dy };
    snake.unshift(head);
    if (!checkFood()) {
      snake.pop();
    }
  }

  // Check for collision with walls or itself
  function checkCollision() {
    const head = snake[0];
    if (
      head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height ||
      snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y)
    ) {
      gameOver();
    }
  }

  // Check if snake eats food
  function checkFood() {
    const head = snake[0];
    return head.x === food.x && head.y === food.y;
  }

  // Handle food eaten
  function eatFood() {
    score++;
    document.getElementById('score').textContent = `Score: ${score}`;
  }

  // Generate random food location
  function generateFood() {
    food.x = Math.floor(Math.random() * (canvas.width / snakeSize)) * snakeSize;
    food.y = Math.floor(Math.random() * (canvas.height / snakeSize)) * snakeSize;
  }

  // Game over
  function gameOver() {
    alert(`Game Over! Your score is ${score}.`);
    resetGame();
  }

  // Reset game
  function resetGame() {
    snake = [{ x: 10, y: 10 }];
    dx = 10;
    dy = 0;
    score = 0;
    document.getElementById('score').textContent = 'Score: 0';
    generateFood();
  }

  // Draw snake and food
  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = 'green';
    snake.forEach(segment => ctx.fillRect(segment.x, segment.y, snakeSize, snakeSize));
    ctx.fillStyle = 'red';
    ctx.fillRect(food.x, food.y, snakeSize, snakeSize);
  }

  // Start game on page load
  window.onload = initGame;

  // Back button
  const backButton = document.createElement('button');
  backButton.textContent = 'Back to Code Buttons.html';
  backButton.onclick = function() {
    window.location.href = 'codebuttons.html';
  };
  document.body.appendChild(backButton);
</script>
</body>
</html>
